<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Chair</title>
    <link rel="stylesheet" type="text/css" href="stylesheet.css">
  
    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.0/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.15/browser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/marked/0.3.2/marked.min.js"></script>
</head>
<body>
    <div id="hook"></div>
 
    <script type="text/babel">

        var Container = React.createClass({
          selectSpeaker: function(name) {
            this.setState({current: name});
          },
          handleAddName: function(name) {
            var list = this.state.list;
            var newList = [name].concat(list);
            this.setState({list: newList});
          },
          getInitialState: function() {
            return {list: ["Peter", "Auni"], 
                    current: "None"};
          },
          render: function() {
            return (
              <div className="container">
                <h1>Speaker List</h1>
                <Form add={this.handleAddName} />
                <SpeakerList list={this.state.list} select={this.selectSpeaker} />
                <Current cur={this.state.current} />
              </div>
            );
          }
        });

        var Form = React.createClass({
          addName: function(e) {
            e.preventDefault();
            var name = this.refs.name.value.trim();
 
            if (!name) {
              return;
            }
            this.props.add(name);
            this.refs.name.value = '';
            return;
          },
          render: function() {
            return (
              <form className="form" onSubmit={this.addName}>
                <input type="text" placeholder="Name" ref="name" />
                <input type="submit" value="Add" />
              </form>
            );
          }
        });
 
        var SpeakerList = React.createClass({
          render: function() {
            var select = this.props.select;
            var speakerNodes = this.props.list.map(function (speaker) {
              return (
                <Speaker key={speaker} name={speaker} select={select}/>
              );
            });
  
            return (
              <div className="speakerList">
                {speakerNodes} 
              </div>
            );
          }
        });   

        var Speaker = React.createClass({
          handleClick: function(event) {
            this.props.select(this.props.name);
        
          },  
          render: function() {
            return (
              <div className="speaker" onClick={this.handleClick}>
                {this.props.name}
              </div>
            );
          }
        });

        var Current = React.createClass({
          getInitialState: function() {
            return null;
          },
          render: function() {
            return (
              <div className="current">
                {this.props.cur}
              </div>
            );
          }
        });

        ReactDOM.render(
          <Container />,
          document.getElementById('hook')
        );

    </script>

</body>
</html>
